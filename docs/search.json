[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "MY DREAMS",
    "section": "",
    "text": "Everyone has a dream…or at least most people have one. These are some of the dreams I have:\n\n\nBuying a house\nBuying a car\nFinding a great job\nTraveling to many countries\n\n\nIn order to achieve these dreams I have taken the following actions:\n\n\nStart a MS in Statistics\nSave and invest\nRead every day\nLearn a new language\nLearn Python\nWork on communication skills\n\n\nSometimes, I need a little motivation. So I look at pictures such as this one from Porche’s web site:\\\n![](https://images-porsche.imgix.net/-/media/18BDB8E5546C4BA4A12F88891D661876_76C4D93742CD42E8BEBE222C39477D82_911-carrera-4-gts-front?w=750&q=85&auto=format)"
  },
  {
    "objectID": "mp01.html",
    "href": "mp01.html",
    "title": "Mini-Project #01: Fiscal Characteristics of Major US Public Transit Systems",
    "section": "",
    "text": "This is a small project in which I explore data from the National Transit Database with the objective of finding facts and insights from the data. Instructions and further details provided by my professor Mr. Michael Weylandt, Ph.D can be found here. We will be using data such as farebox revenues, total number of trips, total number of vehicle miles traveled, and total revenues and expenses by source.\n\n\nTo start with the project, I used the following code to download the data. Here we can see some tables being created with specific columns, then these new tables are joined.\n\nlibrary(tidyverse)\nlibrary(DT)\nsetwd(\"C:/Users/MT/Desktop/R Coding/STA9750-2024-FALL\")\n\nFARES &lt;- readxl::read_xlsx(\"2022_fare_revenue.xlsx\") |&gt;\n    select(-`State/Parent NTD ID`, \n           -`Reporter Type`,\n           -`Reporting Module`,\n           -`TOS`,\n           -`Passenger Paid Fares`,\n           -`Organization Paid Fares`) |&gt;\n    filter(`Expense Type` == \"Funds Earned During Period\") |&gt;\n    select(-`Expense Type`) |&gt;\n    group_by(`NTD ID`,       # Sum over different `TOS` for the same `Mode`\n             `Agency Name`,  # These are direct operated and sub-contracted \n             `Mode`) |&gt;      # of the same transit modality\n                             # Not a big effect in most munis (significant DO\n                             # tends to get rid of sub-contractors), but we'll sum\n                             # to unify different passenger experiences\n    summarize(`Total Fares` = sum(`Total Fares`)) |&gt;\n    ungroup()\n\nEXPENSES &lt;- readr::read_csv(\"2022_expenses.csv\") |&gt;\n    select(`NTD ID`, \n           `Agency`,\n           `Total`, \n           `Mode`) |&gt;\n    mutate(`NTD ID` = as.integer(`NTD ID`)) |&gt;\n    rename(Expenses = Total) |&gt;\n    group_by(`NTD ID`, `Mode`) |&gt;\n    summarize(Expenses = sum(Expenses)) |&gt;\n    ungroup()\n\nFINANCIALS &lt;- inner_join(FARES, EXPENSES, join_by(`NTD ID`, `Mode`))\n\nTRIPS &lt;- readxl::read_xlsx(\"ridership.xlsx\", sheet = \"UPT\") |&gt;\n            filter(`Mode/Type of Service Status` == \"Active\") |&gt;\n            select(-`Legacy NTD ID`, \n                   -`Reporter Type`, \n                   -`Mode/Type of Service Status`, \n                   -`UACE CD`, \n                   -`TOS`) |&gt;\n            pivot_longer(-c(`NTD ID`:`3 Mode`), \n                            names_to=\"month\", \n                            values_to=\"UPT\") |&gt;\n            drop_na() |&gt;\n            mutate(month=my(month)) # Parse _m_onth _y_ear date specs\nMILES &lt;- readxl::read_xlsx(\"ridership.xlsx\", sheet=\"VRM\") |&gt;\n            filter(`Mode/Type of Service Status` == \"Active\") |&gt;\n            select(-`Legacy NTD ID`, \n                   -`Reporter Type`, \n                   -`Mode/Type of Service Status`, \n                   -`UACE CD`, \n                   -`TOS`) |&gt;\n            pivot_longer(-c(`NTD ID`:`3 Mode`), \n                            names_to=\"month\", \n                            values_to=\"VRM\") |&gt;\n            drop_na() |&gt;\n            group_by(`NTD ID`, `Agency`, `UZA Name`, \n                     `Mode`, `3 Mode`, month) |&gt;\n            summarize(VRM = sum(VRM)) |&gt;\n            ungroup() |&gt;\n            mutate(month=my(month)) # Parse _m_onth _y_ear date specs\n\nUSAGE &lt;- inner_join(TRIPS, MILES) |&gt;\n    mutate(`NTD ID` = as.integer(`NTD ID`))\n\nsample_n(USAGE, 1000) |&gt; \n  mutate(month=as.character(month)) |&gt; \n  DT::datatable()\n\n\n\n\n\n\n\n\nAfter downloading the data, the first task is to create a synthetic name. The column UZA Name was renamed as metro_area:\n{r echo=TRUE, warning=FALSE, message=FALSE}\nUSAGE &lt;- USAGE |&gt; \n  rename(metro_area = `UZA Name`)\n\n\n\nMode column was recoded for easier understanding of data. Details obtained from here\n{r echo=TRUE, warning=FALSE, message=FALSE}\nUSAGE &lt;- USAGE |&gt;\n  mutate(Mode = case_when(\n    Mode == \"AR\" ~ \"Alaska Railroad\",\n    Mode == \"CB\" ~ \"Commuter Bus\",\n    Mode == \"CC\" ~ \"Cable Car\",\n    Mode == \"CR\" ~ \"Commuter Rail\",\n    Mode == \"DR\" ~ \"Demand Response\",\n    Mode == \"FB\" ~ \"Ferryboat\",\n    Mode == \"HR\" ~ \"Heavy Rail\",\n    Mode == \"IP\" ~ \"Inclined Plane\",\n    Mode == \"LR\" ~ \"Light Rail\",\n    Mode == \"MB\" ~ \"Bus\",\n    Mode == \"MG\" ~ \"Monorail Automated Guideway\",\n    Mode == \"PB\" ~ \"Publico\",\n    Mode == \"RB\" ~ \"Bus Rapid Transit\",\n    Mode == \"SR\" ~ \"Streetcar Rail\",\n    Mode == \"TB\" ~ \"Trolleybus\",\n    Mode == \"TR\" ~ \"Aerial Tramway\",\n    Mode == \"VP\" ~ \"Vanpool\",\n    Mode == \"YR\" ~ \"Hybrid Rail\",\n    TRUE ~ \"Unknown\"\n))\nNow we can see a table with cleaner data:\n{r echo=TRUE, warning=FALSE, message=FALSE}\nif(!require(\"DT\")) install.packages(\"DT\")\nlibrary(DT)\n\nUSAGE &lt;- USAGE |&gt; \n  select(-`3 Mode`)\n\nsample_n(USAGE, 1000) |&gt; \n  mutate(month = as.character(month)) |&gt; \n  DT::datatable()\n\n\n\nQ1. What transit agency had the most total VRM in our data set?\n{r echo=TRUE, warning=FALSE, message=FALSE}\nUSAGE |&gt;\n  group_by(Agency) |&gt;\n  summarise(UPT_Total = sum(UPT)) |&gt;\n  arrange(desc(UPT_Total)) |&gt;\n  head(1) |&gt;\n  ungroup()\n\nQ2. What transit mode had the most total VRM in our data set?\n{r echo=TRUE, warning=FALSE, message=FALSE}\nUSAGE |&gt;\n  group_by(Mode) |&gt;\n  summarise(UPT_Total = sum(UPT)) |&gt;\n  arrange(desc(UPT_Total)) |&gt;\n  head(1) |&gt;\n  ungroup()\n# The data shows bus transportation had the most vehicle revenue miles \"VRM\"\n# which is \"The miles that vehicles are scheduled to or actually travel while in revenue service\"\n# https://www.transit.dot.gov/ntd/national-transit-database-ntd-glossary#V\n\nQ3. How many trips were taken on the NYC Subway (Heavy Rail) in May 2024?\n{r echo=TRUE, warning=FALSE, message=FALSE}\ncolnames(USAGE)\nnyc_filter_q3 &lt;- USAGE |&gt;\n  filter(metro_area == \"New York--Jersey City--Newark, NY--NJ\", Mode == \"Heavy Rail\", month == \"2024-05-01\") |&gt;\n  summarise(May_2024_Trips = sum(UPT, na.rm = TRUE))\nprint(nyc_filter_q3)\n\nQ4. What mode of transport had the longest average trip in May 2024? Note: This question can’t be answered with the current data\nQ5. How much did NYC subway ridership fall between April 2019 and April 2020?\n{r echo=TRUE, warning=FALSE, message=FALSE}\nnyc_filter_q5_part1 &lt;- USAGE |&gt;\n  filter(metro_area == \"New York--Jersey City--Newark, NY--NJ\", Mode == \"Heavy Rail\", month == \"2019-04-01\") |&gt;\n  summarise(nyc_sub_2019 = sum(UPT, na.rm = TRUE))\nnyc_filter_q5_part2 &lt;- USAGE |&gt;\n  filter(metro_area == \"New York--Jersey City--Newark, NY--NJ\", Mode == \"Heavy Rail\", month == \"2020-04-01\") |&gt;\n  summarise(nyc_sub_2020 = sum(UPT, na.rm = TRUE))\nnyc_filter_q5_part3=((nyc_filter_q5_part2-nyc_filter_q5_part1)/(nyc_filter_q5_part1))*100\nprint(nyc_filter_q5_part3)\n\n\n\n\nQ4.1 Which Agency has the most VRM per UPT\n{r echo=TRUE, warning=FALSE, message=FALSE}\ncolnames(USAGE)\n\nefficiency_ratio &lt;- USAGE |&gt;\n  group_by(Agency) |&gt;\n  summarise(UPT_Total = sum(UPT), VRM_Total = sum(VRM), VRM_per_UPT_ratio = (VRM_Total/UPT_Total)) |&gt;\n  ungroup() |&gt;\n  arrange(desc(VRM_per_UPT_ratio))\n  \nefficient_companies &lt;- efficiency_ratio |&gt;\n  head(5)\n\nprint(efficient_companies)\n\nQ4.2 Most used mode per metro area\n{r echo=TRUE, warning=FALSE, message=FALSE}\nmost_used_mode_per_metro_area &lt;- USAGE |&gt;\n  group_by(metro_area, Mode) |&gt;\n  summarise(total_upt = sum(UPT, na.rm = TRUE), .groups = \"drop\") |&gt;\n  group_by(metro_area) |&gt;\n  slice(which.max(total_upt)) |&gt;\n  select(metro_area, Mode, total_upt)\nprint(most_used_mode_per_metro_area)\n\n\nQ4.3 Top metro areas by mode\n{r echo=TRUE, warning=FALSE, message=FALSE}\ntop_metro_areas_by_mode &lt;- USAGE |&gt;\n  group_by(Mode, metro_area) |&gt;\n  summarise(total_upt = sum(UPT, na.rm = TRUE)) |&gt;\n  group_by(Mode) |&gt;\n  slice(which.max(total_upt)) |&gt;\n  arrange(desc(total_upt))\n\nprint(top_metro_areas_by_mode)\n\n\n\n\n{r echo=TRUE, warning=FALSE, message=FALSE}\n\nUSAGE_2022_ANNUAL &lt;- USAGE |&gt;\n  filter(year(month) == \"2022\") |&gt;\n  group_by(`NTD ID`, Agency, metro_area, Mode) |&gt;\n  summarise(UPT_Total = sum(UPT, na.rm = TRUE), VRM_Total = sum(VRM, na.rm = TRUE)) |&gt;\n  ungroup()\n\nFINANCIALS &lt;- FINANCIALS |&gt;\n  mutate(Mode = case_when(\n    Mode == \"AR\" ~ \"Alaska Railroad\",\n    Mode == \"CB\" ~ \"Commuter Bus\",\n    Mode == \"CC\" ~ \"Cable Car\",\n    Mode == \"CR\" ~ \"Commuter Rail\",\n    Mode == \"DR\" ~ \"Demand Response\",\n    Mode == \"FB\" ~ \"Ferryboat\",\n    Mode == \"HR\" ~ \"Heavy Rail\",\n    Mode == \"IP\" ~ \"Inclined Plane\",\n    Mode == \"LR\" ~ \"Light Rail\",\n    Mode == \"MB\" ~ \"Bus\",\n    Mode == \"MG\" ~ \"Monorail Automated Guideway\",\n    Mode == \"PB\" ~ \"Publico\",\n    Mode == \"RB\" ~ \"Bus Rapid Transit\",\n    Mode == \"SR\" ~ \"Streetcar Rail\",\n    Mode == \"TB\" ~ \"Trolleybus\",\n    Mode == \"TR\" ~ \"Aerial Tramway\",\n    Mode == \"VP\" ~ \"Vanpool\",\n    Mode == \"YR\" ~ \"Hybrid Rail\",\n    TRUE ~ \"Unknown\"\n  ))\n\n\nUSAGE_AND_FINANCIALS &lt;- left_join(USAGE_2022_ANNUAL, FINANCIALS, \n  join_by(`NTD ID`, \"Mode\")) |&gt;\n  drop_na()\n\ncolnames(USAGE_2022_ANNUAL)\n\nsample_n(USAGE_2022_ANNUAL, 1141) |&gt; \n    DT::datatable()\n\n\n\nQ1. Which transit system (agency and mode) had the most UPT in 2022?\n{r echo=TRUE, warning=FALSE, message=FALSE}\nUSAGE_2022_ANNUAL |&gt;\n  group_by(Agency, Mode) |&gt;\n  arrange(desc(UPT_Total)) |&gt;\n  head(5) |&gt;\n  ungroup()\n\nQ2. Which transit system (agency and mode) had the highest farebox recovery, defined as the highest ratio of Total Fares to Expenses? Note answer restricted to major transit systems, which we can define as those with 400,000 UPT per annum.\n{r echo=TRUE, warning=FALSE, message=FALSE}\nhighest_farebox_recovery &lt;- USAGE_AND_FINANCIALS |&gt;\n  group_by(Agency, Mode) |&gt;\n  summarise(ratio = (sum(`Total Fares`, na.rm = TRUE)/sum(Expenses, na.rm = TRUE))) |&gt;\n  ungroup() |&gt;\n  arrange(desc(ratio)) |&gt;\n  head(5)\n\nprint(highest_farebox_recovery)\n\nQ3. Which transit system (agency and mode) has the lowest expenses per UPT? Note answer restricted to major transit systems, which we can define as those with 400,000 UPT per annum.\n{r echo=TRUE, warning=FALSE, message=FALSE}\nlowest_expenses_per_UPT &lt;- USAGE_AND_FINANCIALS |&gt;\n  group_by(Agency, Mode) |&gt;\n  summarise(ratio = (sum(Expenses, na.rm = TRUE)/sum(UPT_Total, na.rm = TRUE)),.groups = \"drop\") |&gt;\n  arrange(ratio) |&gt;\n  head(5)\nprint(lowest_expenses_per_UPT)\n\nQ4. Which transit system (agency and mode) has the highest total fares per UPT? Note answer restricted to major transit systems, which we can define as those with 400,000 UPT per annum.\n{r echo=TRUE, warning=FALSE, message=FALSE}\nhighest_total_fares_per_UPT &lt;- USAGE_AND_FINANCIALS |&gt;\n  group_by(Agency, Mode) |&gt;\n  summarise(ratio = (sum(`Total Fares`, na.rm = TRUE)/sum(UPT_Total, na.rm = TRUE)),.groups = \"drop\") |&gt;\n  arrange(desc(ratio)) |&gt;\n  head(5)\nprint(highest_total_fares_per_UPT) \n\nQ5. Which transit system (agency and mode) has the lowest expenses per VRM?\nNote answer restricted to major transit systems, which we can define as those with 400,000 UPT per annum.\n{r echo=TRUE, warning=FALSE, message=FALSE}\nlowest_expenses_per_VRM &lt;- USAGE_AND_FINANCIALS |&gt;\n  group_by(Agency, Mode) |&gt;\n  summarise(ratio = (sum(Expenses, na.rm = TRUE)/sum(VRM_Total, na.rm = TRUE)),.groups = \"drop\") |&gt;\n  arrange(ratio) |&gt;\n  head(5)\nprint(lowest_expenses_per_VRM)\n\nQ6. Which transit system (agency and mode) has the highest total fares per VRM?\nNote answer restricted to major transit systems, which we can define as those with 400,000 UPT per annum.\n{r echo=TRUE, warning=FALSE, message=FALSE}\nhighest_fares_per_VRM &lt;- USAGE_AND_FINANCIALS |&gt;\n  group_by(Agency, Mode) |&gt;\n  summarise(ratio = (sum(`Total Fares`, na.rm = TRUE)/sum(VRM_Total, na.rm = TRUE)),.groups = \"drop\") |&gt;\n  arrange(desc(ratio)) |&gt;\n  head(5)\nprint(highest_fares_per_VRM)"
  },
  {
    "objectID": "mp01.html#preparing-the-data",
    "href": "mp01.html#preparing-the-data",
    "title": "Mini-Project #01: Fiscal Characteristics of Major US Public Transit Systems",
    "section": "",
    "text": "To start with the project, I used the following code to download the data. Here we can see some tables being created with specific columns, then these new tables are joined.\n\nlibrary(tidyverse)\nlibrary(DT)\nsetwd(\"C:/Users/MT/Desktop/R Coding/STA9750-2024-FALL\")\n\nFARES &lt;- readxl::read_xlsx(\"2022_fare_revenue.xlsx\") |&gt;\n    select(-`State/Parent NTD ID`, \n           -`Reporter Type`,\n           -`Reporting Module`,\n           -`TOS`,\n           -`Passenger Paid Fares`,\n           -`Organization Paid Fares`) |&gt;\n    filter(`Expense Type` == \"Funds Earned During Period\") |&gt;\n    select(-`Expense Type`) |&gt;\n    group_by(`NTD ID`,       # Sum over different `TOS` for the same `Mode`\n             `Agency Name`,  # These are direct operated and sub-contracted \n             `Mode`) |&gt;      # of the same transit modality\n                             # Not a big effect in most munis (significant DO\n                             # tends to get rid of sub-contractors), but we'll sum\n                             # to unify different passenger experiences\n    summarize(`Total Fares` = sum(`Total Fares`)) |&gt;\n    ungroup()\n\nEXPENSES &lt;- readr::read_csv(\"2022_expenses.csv\") |&gt;\n    select(`NTD ID`, \n           `Agency`,\n           `Total`, \n           `Mode`) |&gt;\n    mutate(`NTD ID` = as.integer(`NTD ID`)) |&gt;\n    rename(Expenses = Total) |&gt;\n    group_by(`NTD ID`, `Mode`) |&gt;\n    summarize(Expenses = sum(Expenses)) |&gt;\n    ungroup()\n\nFINANCIALS &lt;- inner_join(FARES, EXPENSES, join_by(`NTD ID`, `Mode`))\n\nTRIPS &lt;- readxl::read_xlsx(\"ridership.xlsx\", sheet = \"UPT\") |&gt;\n            filter(`Mode/Type of Service Status` == \"Active\") |&gt;\n            select(-`Legacy NTD ID`, \n                   -`Reporter Type`, \n                   -`Mode/Type of Service Status`, \n                   -`UACE CD`, \n                   -`TOS`) |&gt;\n            pivot_longer(-c(`NTD ID`:`3 Mode`), \n                            names_to=\"month\", \n                            values_to=\"UPT\") |&gt;\n            drop_na() |&gt;\n            mutate(month=my(month)) # Parse _m_onth _y_ear date specs\nMILES &lt;- readxl::read_xlsx(\"ridership.xlsx\", sheet=\"VRM\") |&gt;\n            filter(`Mode/Type of Service Status` == \"Active\") |&gt;\n            select(-`Legacy NTD ID`, \n                   -`Reporter Type`, \n                   -`Mode/Type of Service Status`, \n                   -`UACE CD`, \n                   -`TOS`) |&gt;\n            pivot_longer(-c(`NTD ID`:`3 Mode`), \n                            names_to=\"month\", \n                            values_to=\"VRM\") |&gt;\n            drop_na() |&gt;\n            group_by(`NTD ID`, `Agency`, `UZA Name`, \n                     `Mode`, `3 Mode`, month) |&gt;\n            summarize(VRM = sum(VRM)) |&gt;\n            ungroup() |&gt;\n            mutate(month=my(month)) # Parse _m_onth _y_ear date specs\n\nUSAGE &lt;- inner_join(TRIPS, MILES) |&gt;\n    mutate(`NTD ID` = as.integer(`NTD ID`))\n\nsample_n(USAGE, 1000) |&gt; \n  mutate(month=as.character(month)) |&gt; \n  DT::datatable()"
  },
  {
    "objectID": "mp01.html#creating-syntatic-names",
    "href": "mp01.html#creating-syntatic-names",
    "title": "Mini-Project #01: Fiscal Characteristics of Major US Public Transit Systems",
    "section": "",
    "text": "After downloading the data, the first task is to create a synthetic name. The column UZA Name was renamed as metro_area:\n{r echo=TRUE, warning=FALSE, message=FALSE}\nUSAGE &lt;- USAGE |&gt; \n  rename(metro_area = `UZA Name`)"
  },
  {
    "objectID": "mp01.html#task-1-creating-syntatic-names",
    "href": "mp01.html#task-1-creating-syntatic-names",
    "title": "Mini-Project #01: Fiscal Characteristics of Major US Public Transit Systems",
    "section": "",
    "text": "After downloading the data, the first task is to create a synthetic name. The column UZA Name was renamed as metro_area:\n{r echo=TRUE, warning=FALSE, message=FALSE}\nUSAGE &lt;- USAGE |&gt; \n  rename(metro_area = `UZA Name`)"
  },
  {
    "objectID": "mp01.html#task-2-recoding-the-mode-column",
    "href": "mp01.html#task-2-recoding-the-mode-column",
    "title": "Mini-Project #01: Fiscal Characteristics of Major US Public Transit Systems",
    "section": "",
    "text": "Mode column was recoded for easier understanding of data. Details obtained from here\n{r echo=TRUE, warning=FALSE, message=FALSE}\nUSAGE &lt;- USAGE |&gt;\n  mutate(Mode = case_when(\n    Mode == \"AR\" ~ \"Alaska Railroad\",\n    Mode == \"CB\" ~ \"Commuter Bus\",\n    Mode == \"CC\" ~ \"Cable Car\",\n    Mode == \"CR\" ~ \"Commuter Rail\",\n    Mode == \"DR\" ~ \"Demand Response\",\n    Mode == \"FB\" ~ \"Ferryboat\",\n    Mode == \"HR\" ~ \"Heavy Rail\",\n    Mode == \"IP\" ~ \"Inclined Plane\",\n    Mode == \"LR\" ~ \"Light Rail\",\n    Mode == \"MB\" ~ \"Bus\",\n    Mode == \"MG\" ~ \"Monorail Automated Guideway\",\n    Mode == \"PB\" ~ \"Publico\",\n    Mode == \"RB\" ~ \"Bus Rapid Transit\",\n    Mode == \"SR\" ~ \"Streetcar Rail\",\n    Mode == \"TB\" ~ \"Trolleybus\",\n    Mode == \"TR\" ~ \"Aerial Tramway\",\n    Mode == \"VP\" ~ \"Vanpool\",\n    Mode == \"YR\" ~ \"Hybrid Rail\",\n    TRUE ~ \"Unknown\"\n))\nNow we can see a table with cleaner data:\n{r echo=TRUE, warning=FALSE, message=FALSE}\nif(!require(\"DT\")) install.packages(\"DT\")\nlibrary(DT)\n\nUSAGE &lt;- USAGE |&gt; \n  select(-`3 Mode`)\n\nsample_n(USAGE, 1000) |&gt; \n  mutate(month = as.character(month)) |&gt; \n  DT::datatable()"
  },
  {
    "objectID": "mp01.html#task-3-answering-instructor-specified-questions-with-dplyr",
    "href": "mp01.html#task-3-answering-instructor-specified-questions-with-dplyr",
    "title": "Mini-Project #01: Fiscal Characteristics of Major US Public Transit Systems",
    "section": "",
    "text": "Q1. What transit agency had the most total VRM in our data set?\n{r echo=TRUE, warning=FALSE, message=FALSE}\nUSAGE |&gt;\n  group_by(Agency) |&gt;\n  summarise(UPT_Total = sum(UPT)) |&gt;\n  arrange(desc(UPT_Total)) |&gt;\n  head(1) |&gt;\n  ungroup()\n\nQ2. What transit mode had the most total VRM in our data set?\n{r echo=TRUE, warning=FALSE, message=FALSE}\nUSAGE |&gt;\n  group_by(Mode) |&gt;\n  summarise(UPT_Total = sum(UPT)) |&gt;\n  arrange(desc(UPT_Total)) |&gt;\n  head(1) |&gt;\n  ungroup()\n# The data shows bus transportation had the most vehicle revenue miles \"VRM\"\n# which is \"The miles that vehicles are scheduled to or actually travel while in revenue service\"\n# https://www.transit.dot.gov/ntd/national-transit-database-ntd-glossary#V\n\nQ3. How many trips were taken on the NYC Subway (Heavy Rail) in May 2024?\n{r echo=TRUE, warning=FALSE, message=FALSE}\ncolnames(USAGE)\nnyc_filter_q3 &lt;- USAGE |&gt;\n  filter(metro_area == \"New York--Jersey City--Newark, NY--NJ\", Mode == \"Heavy Rail\", month == \"2024-05-01\") |&gt;\n  summarise(May_2024_Trips = sum(UPT, na.rm = TRUE))\nprint(nyc_filter_q3)\n\nQ4. What mode of transport had the longest average trip in May 2024? Note: This question can’t be answered with the current data\nQ5. How much did NYC subway ridership fall between April 2019 and April 2020?\n{r echo=TRUE, warning=FALSE, message=FALSE}\nnyc_filter_q5_part1 &lt;- USAGE |&gt;\n  filter(metro_area == \"New York--Jersey City--Newark, NY--NJ\", Mode == \"Heavy Rail\", month == \"2019-04-01\") |&gt;\n  summarise(nyc_sub_2019 = sum(UPT, na.rm = TRUE))\nnyc_filter_q5_part2 &lt;- USAGE |&gt;\n  filter(metro_area == \"New York--Jersey City--Newark, NY--NJ\", Mode == \"Heavy Rail\", month == \"2020-04-01\") |&gt;\n  summarise(nyc_sub_2020 = sum(UPT, na.rm = TRUE))\nnyc_filter_q5_part3=((nyc_filter_q5_part2-nyc_filter_q5_part1)/(nyc_filter_q5_part1))*100\nprint(nyc_filter_q5_part3)"
  },
  {
    "objectID": "mp01.html#task-4-explore-and-analyze-find-three-more-interesting-transit-facts-in-this-data-other-than-those-above.",
    "href": "mp01.html#task-4-explore-and-analyze-find-three-more-interesting-transit-facts-in-this-data-other-than-those-above.",
    "title": "Mini-Project #01: Fiscal Characteristics of Major US Public Transit Systems",
    "section": "",
    "text": "Q4.1 Which Agency has the most VRM per UPT\n{r echo=TRUE, warning=FALSE, message=FALSE}\ncolnames(USAGE)\n\nefficiency_ratio &lt;- USAGE |&gt;\n  group_by(Agency) |&gt;\n  summarise(UPT_Total = sum(UPT), VRM_Total = sum(VRM), VRM_per_UPT_ratio = (VRM_Total/UPT_Total)) |&gt;\n  ungroup() |&gt;\n  arrange(desc(VRM_per_UPT_ratio))\n  \nefficient_companies &lt;- efficiency_ratio |&gt;\n  head(5)\n\nprint(efficient_companies)\n\nQ4.2 Most used mode per metro area\n{r echo=TRUE, warning=FALSE, message=FALSE}\nmost_used_mode_per_metro_area &lt;- USAGE |&gt;\n  group_by(metro_area, Mode) |&gt;\n  summarise(total_upt = sum(UPT, na.rm = TRUE), .groups = \"drop\") |&gt;\n  group_by(metro_area) |&gt;\n  slice(which.max(total_upt)) |&gt;\n  select(metro_area, Mode, total_upt)\nprint(most_used_mode_per_metro_area)\n\n\nQ4.3 Top metro areas by mode\n{r echo=TRUE, warning=FALSE, message=FALSE}\ntop_metro_areas_by_mode &lt;- USAGE |&gt;\n  group_by(Mode, metro_area) |&gt;\n  summarise(total_upt = sum(UPT, na.rm = TRUE)) |&gt;\n  group_by(Mode) |&gt;\n  slice(which.max(total_upt)) |&gt;\n  arrange(desc(total_upt))\n\nprint(top_metro_areas_by_mode)"
  },
  {
    "objectID": "mp01.html#task-5-table-summarization",
    "href": "mp01.html#task-5-table-summarization",
    "title": "Mini-Project #01: Fiscal Characteristics of Major US Public Transit Systems",
    "section": "",
    "text": "{r echo=TRUE, warning=FALSE, message=FALSE}\n\nUSAGE_2022_ANNUAL &lt;- USAGE |&gt;\n  filter(year(month) == \"2022\") |&gt;\n  group_by(`NTD ID`, Agency, metro_area, Mode) |&gt;\n  summarise(UPT_Total = sum(UPT, na.rm = TRUE), VRM_Total = sum(VRM, na.rm = TRUE)) |&gt;\n  ungroup()\n\nFINANCIALS &lt;- FINANCIALS |&gt;\n  mutate(Mode = case_when(\n    Mode == \"AR\" ~ \"Alaska Railroad\",\n    Mode == \"CB\" ~ \"Commuter Bus\",\n    Mode == \"CC\" ~ \"Cable Car\",\n    Mode == \"CR\" ~ \"Commuter Rail\",\n    Mode == \"DR\" ~ \"Demand Response\",\n    Mode == \"FB\" ~ \"Ferryboat\",\n    Mode == \"HR\" ~ \"Heavy Rail\",\n    Mode == \"IP\" ~ \"Inclined Plane\",\n    Mode == \"LR\" ~ \"Light Rail\",\n    Mode == \"MB\" ~ \"Bus\",\n    Mode == \"MG\" ~ \"Monorail Automated Guideway\",\n    Mode == \"PB\" ~ \"Publico\",\n    Mode == \"RB\" ~ \"Bus Rapid Transit\",\n    Mode == \"SR\" ~ \"Streetcar Rail\",\n    Mode == \"TB\" ~ \"Trolleybus\",\n    Mode == \"TR\" ~ \"Aerial Tramway\",\n    Mode == \"VP\" ~ \"Vanpool\",\n    Mode == \"YR\" ~ \"Hybrid Rail\",\n    TRUE ~ \"Unknown\"\n  ))\n\n\nUSAGE_AND_FINANCIALS &lt;- left_join(USAGE_2022_ANNUAL, FINANCIALS, \n  join_by(`NTD ID`, \"Mode\")) |&gt;\n  drop_na()\n\ncolnames(USAGE_2022_ANNUAL)\n\nsample_n(USAGE_2022_ANNUAL, 1141) |&gt; \n    DT::datatable()"
  },
  {
    "objectID": "mp01.html#task-6-farebox-recovery-among-major-systems",
    "href": "mp01.html#task-6-farebox-recovery-among-major-systems",
    "title": "Mini-Project #01: Fiscal Characteristics of Major US Public Transit Systems",
    "section": "",
    "text": "Q1. Which transit system (agency and mode) had the most UPT in 2022?\n{r echo=TRUE, warning=FALSE, message=FALSE}\nUSAGE_2022_ANNUAL |&gt;\n  group_by(Agency, Mode) |&gt;\n  arrange(desc(UPT_Total)) |&gt;\n  head(5) |&gt;\n  ungroup()\n\nQ2. Which transit system (agency and mode) had the highest farebox recovery, defined as the highest ratio of Total Fares to Expenses? Note answer restricted to major transit systems, which we can define as those with 400,000 UPT per annum.\n{r echo=TRUE, warning=FALSE, message=FALSE}\nhighest_farebox_recovery &lt;- USAGE_AND_FINANCIALS |&gt;\n  group_by(Agency, Mode) |&gt;\n  summarise(ratio = (sum(`Total Fares`, na.rm = TRUE)/sum(Expenses, na.rm = TRUE))) |&gt;\n  ungroup() |&gt;\n  arrange(desc(ratio)) |&gt;\n  head(5)\n\nprint(highest_farebox_recovery)\n\nQ3. Which transit system (agency and mode) has the lowest expenses per UPT? Note answer restricted to major transit systems, which we can define as those with 400,000 UPT per annum.\n{r echo=TRUE, warning=FALSE, message=FALSE}\nlowest_expenses_per_UPT &lt;- USAGE_AND_FINANCIALS |&gt;\n  group_by(Agency, Mode) |&gt;\n  summarise(ratio = (sum(Expenses, na.rm = TRUE)/sum(UPT_Total, na.rm = TRUE)),.groups = \"drop\") |&gt;\n  arrange(ratio) |&gt;\n  head(5)\nprint(lowest_expenses_per_UPT)\n\nQ4. Which transit system (agency and mode) has the highest total fares per UPT? Note answer restricted to major transit systems, which we can define as those with 400,000 UPT per annum.\n{r echo=TRUE, warning=FALSE, message=FALSE}\nhighest_total_fares_per_UPT &lt;- USAGE_AND_FINANCIALS |&gt;\n  group_by(Agency, Mode) |&gt;\n  summarise(ratio = (sum(`Total Fares`, na.rm = TRUE)/sum(UPT_Total, na.rm = TRUE)),.groups = \"drop\") |&gt;\n  arrange(desc(ratio)) |&gt;\n  head(5)\nprint(highest_total_fares_per_UPT) \n\nQ5. Which transit system (agency and mode) has the lowest expenses per VRM?\nNote answer restricted to major transit systems, which we can define as those with 400,000 UPT per annum.\n{r echo=TRUE, warning=FALSE, message=FALSE}\nlowest_expenses_per_VRM &lt;- USAGE_AND_FINANCIALS |&gt;\n  group_by(Agency, Mode) |&gt;\n  summarise(ratio = (sum(Expenses, na.rm = TRUE)/sum(VRM_Total, na.rm = TRUE)),.groups = \"drop\") |&gt;\n  arrange(ratio) |&gt;\n  head(5)\nprint(lowest_expenses_per_VRM)\n\nQ6. Which transit system (agency and mode) has the highest total fares per VRM?\nNote answer restricted to major transit systems, which we can define as those with 400,000 UPT per annum.\n{r echo=TRUE, warning=FALSE, message=FALSE}\nhighest_fares_per_VRM &lt;- USAGE_AND_FINANCIALS |&gt;\n  group_by(Agency, Mode) |&gt;\n  summarise(ratio = (sum(`Total Fares`, na.rm = TRUE)/sum(VRM_Total, na.rm = TRUE)),.groups = \"drop\") |&gt;\n  arrange(desc(ratio)) |&gt;\n  head(5)\nprint(highest_fares_per_VRM)"
  }
]